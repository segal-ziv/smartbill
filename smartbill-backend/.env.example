# ===========================================
# SmartBill Backend - Environment Variables
# ===========================================

# -------------------------
# Application Configuration
# -------------------------
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:3000

# -------------------------
# Database (Supabase PostgreSQL)
# -------------------------
# Get these from: Supabase Dashboard > Project Settings > Database
# Connection pooling URL (for Prisma with connection pooling)
DATABASE_URL="postgresql://postgres.[PROJECT-ID]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true"

# Direct connection URL (for migrations)
DIRECT_URL="postgresql://postgres.[PROJECT-ID]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres"

# -------------------------
# Redis (Upstash)
# -------------------------
# Get this from: Upstash Dashboard > Your Redis > Details
# Format: rediss://default:[PASSWORD]@[HOST]:6379
REDIS_URL=redis://localhost:6379

# -------------------------
# File Storage (Supabase Storage)
# -------------------------
# Get these from: Supabase Dashboard > Project Settings > API
SUPABASE_URL=https://[PROJECT-ID].supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Storage bucket name (create in Supabase Storage)
SUPABASE_BUCKET=smartbill-documents

# -------------------------
# Authentication (Clerk)
# -------------------------
# Get these from: https://dashboard.clerk.com
# Select your application > API Keys
CLERK_PUBLISHABLE_KEY=pk_test_YOUR_KEY_HERE
CLERK_SECRET_KEY=sk_test_YOUR_KEY_HERE

# -------------------------
# OCR Provider (Google Cloud Vision)
# -------------------------
# Get these from: https://console.cloud.google.com
# 1. Create a project
# 2. Enable Cloud Vision API
# 3. Create a service account with Vision API permissions
# 4. Download the JSON key file

# Google Cloud Project ID
GOOGLE_CLOUD_PROJECT_ID=your-project-id

# Service account credentials as JSON string (for production/Render)
# Copy the entire content of your service account JSON file
GOOGLE_APPLICATION_CREDENTIALS_JSON='{"type":"service_account","project_id":"...","private_key":"..."}'

# Or for local development, use file path:
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# -------------------------
# Optional: Gmail API (OAuth 2.0)
# -------------------------
# Get these from: Google Cloud Console > APIs & Services > Credentials
# Coming soon - for automatic Gmail invoice ingestion
GMAIL_CLIENT_ID=
GMAIL_CLIENT_SECRET=
GMAIL_REDIRECT_URI=http://localhost:3001/api/auth/gmail/callback

# -------------------------
# Optional: WhatsApp Business (Meta)
# -------------------------
# Get these from: Meta Business Manager
# Coming soon - for WhatsApp invoice reception
WHATSAPP_BUSINESS_PHONE_ID=
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_VERIFY_TOKEN=
WHATSAPP_WEBHOOK_SECRET=

# -------------------------
# Development Notes
# -------------------------
# 1. Copy this file to .env for local development
# 2. Never commit .env to git
# 3. For Render deployment:
#    - Set all environment variables in Render Dashboard
#    - Use REDIS_URL from Upstash (with TLS: rediss://)
#    - Use GOOGLE_APPLICATION_CREDENTIALS_JSON (not file path)
# 4. Database URLs should use connection pooling in production
# 5. Redis URL for Upstash must start with rediss:// (TLS enabled)
